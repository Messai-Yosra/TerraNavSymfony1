{% extends "baseClient.html.twig" %}
{% block titre %}Ajouter un nouveau post{% endblock %}

{% block content %}
<link href="{{ asset('css/bootstrap.min.css') }}" rel="stylesheet">
<link href="{{ asset('css/styleClient.css') }}" rel="stylesheet">
<link href="{{ asset('css/interactions/interactions.css') }}" rel="stylesheet">
<div class="container mt-4">
    <div class="card shadow-sm">
        <div class="card-body">
            {{ form_start(form, {'attr': {'id': 'postForm', 'novalidate': 'novalidate'}}) }}
                <div class="mb-3">
                    {{ form_label(form.description, 'Description :', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.description, {'attr': {'class': 'form-control', 'placeholder': 'Modifiez la description ici...'}}) }}
                    {% if form.description.vars.errors is not empty %}
                        <div class="alert alert-danger mt-2">
                            {{ form_errors(form.description) }}
                        </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    <label class="form-label">Image actuelle :</label>
                    {% if post.image %}
                        <img src="{{ asset('img/' ~ post.image) }}" alt="Image actuelle" class="img-fluid rounded mb-3" style="max-width: 200px;">
                    {% else %}
                        <p class="text-muted">Aucune image disponible.</p>
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form_label(form.image, 'Modifier l\'image :', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.image, {'attr': {'class': 'form-control'}}) }}
                    {% if form.image.vars.errors is not empty %}
                        <div class="alert alert-danger mt-2">
                            {{ form_errors(form.image) }}
                        </div>
                    {% endif %}
                </div>
                <button type="submit" class="btn btn-success">
                    <i class="fas fa-save"></i> Enregistrer les modifications
                </button>
            {{ form_end(form) }}
        </div>
    </div>

    <!-- Bouton Annuler -->
    <div class="mt-4">
        <a href="{{ path('app_post_show', {'id': post.id}) }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Annuler
        </a>
    </div>
</div>
{% endblock %}