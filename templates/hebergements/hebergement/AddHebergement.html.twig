{% extends 'baseClient.html.twig' %}

{% block title %}Ajouter hébergement{% endblock %}

{% block content %}
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
                <h6 class="section-title text-center text-primary text-uppercase">Ajout d'un Hébergement</h6>
                <h1 class="mb-5">Ajouter un <span class="text-primary text-uppercase">hébergement</span></h1>
            </div>
            
            {# Affichage des messages flash #}
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert alert-{{ label == 'error' ? 'danger' : label }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endfor %}
            
            <div class="row g-5">
                <div class="col-lg-12">
                    <div class="wow fadeInUp" data-wow-delay="0.2s">
                        {{ form_start(form) }}
                        
                        {# Affichage des erreurs globales du formulaire #}
                        {% if not form.vars.valid and form.vars.submitted %}
                            <div class="alert alert-danger">
                                {{ form_errors(form) }}
                            </div>
                        {% endif %}
                        
                        <div class="row g-3">
                            {# Pour le champ nom par exemple #}
                            <div class="col-md-6">
                                <div class="form-floating">
                                    {{ form_label(form.nom, null, {'label_attr': {'class': 'form-label'}}) }}
                                    {{ form_widget(form.nom, {
                                        'attr': {
                                            'class': 'form-control' ~ (not form.nom.vars.valid and form.vars.submitted ? ' is-invalid' : '')
                                        }
                                    }) }}
                                    {% if not form.nom.vars.valid and form.vars.submitted %}
                                        <div class="invalid-feedback">
                                            {% for error in form.nom.vars.errors %}
                                                {{ error.message }}<br>
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            {% if form.type_hebergement is defined %}
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        {{ form_row(form.type_hebergement, {
                                            'attr': {'class': 'form-control'},
                                            'label_attr': {'class': 'form-label'}
                                        }) }}
                                    </div>
                                </div>
                            {% endif %}
                            
                            <div class="col-md-12">
                                <div class="form-floating">
                                    {{ form_row(form.description, {
                                        'attr': {'class': 'form-control', 'rows': 5},
                                        'label_attr': {'class': 'form-label'}
                                    }) }}
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-floating">
                                    {{ form_row(form.adresse, {
                                        'attr': {'class': 'form-control'},
                                        'label_attr': {'class': 'form-label'}
                                    }) }}
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <div class="form-floating">
                                    {{ form_row(form.ville, {
                                        'attr': {'class': 'form-control'},
                                        'label_attr': {'class': 'form-label'}
                                    }) }}
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <div class="form-floating">
                                    {{ form_row(form.pays, {
                                        'attr': {'class': 'form-control'},
                                        'label_attr': {'class': 'form-label'}
                                    }) }}
                                </div>
                            </div>
                            
                            {% if form.contact is defined %}
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        {{ form_row(form.contact, {
                                            'attr': {'class': 'form-control'},
                                            'label_attr': {'class': 'form-label'}
                                        }) }}
                                    </div>
                                </div>
                            {% endif %}
                            
                            {% if form.nb_chambres is defined %}
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        {{ form_row(form.nb_chambres, {
                                            'attr': {'class': 'form-control'},
                                            'label_attr': {'class': 'form-label'}
                                        }) }}
                                    </div>
                                </div>
                            {% endif %}
                            
                            {% if form.services is defined %}
                                <div class="col-md-12">
                                    <div class="form-floating">
                                        {{ form_row(form.services, {
                                            'attr': {'class': 'form-control', 'rows': 3},
                                            'label_attr': {'class': 'form-label'}
                                        }) }}
                                    </div>
                                </div>
                            {% endif %}
                            
                            {% if form.politique_annulation is defined %}
                                <div class="col-md-12">
                                    <div class="form-floating">
                                        {{ form_row(form.politique_annulation, {
                                            'attr': {'class': 'form-control', 'rows': 3},
                                            'label_attr': {'class': 'form-label'}
                                        }) }}
                                    </div>
                                </div>
                            {% endif %}
                            
                            {% if form.id_user is defined %}
                                <div class="col-md-12 mb-4">
                                    <div class="form-floating">
                                        {{ form_row(form.id_user, {
                                            'attr': {'class': 'form-control form-select'},
                                            'label_attr': {'class': 'form-label'},
                                            'label': 'Propriétaire de l\'hébergement'
                                        }) }}
                                    </div>
                                    <small class="text-muted">Sélectionnez l'utilisateur qui sera propriétaire de cet hébergement</small>
                                </div>
                            {% endif %}
                            
                            <div class="col-md-12 text-center mt-4">
                                <button class="btn btn-primary py-3 px-5" type="submit">Ajouter l'hébergement</button>
                                <a href="{{ path('app_hebergement_index') }}" class="btn btn-secondary py-3 px-5 ms-2">Annuler</a>
                            </div>
                        </div>
                        {{ form_end(form) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}