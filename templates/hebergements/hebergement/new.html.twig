{% extends 'baseClient.html.twig' %}

{% block title %}Détails de l'hébergement{% endblock %}

{% block content %}
    <!-- Booking Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
                <h6 class="section-title text-center text-primary text-uppercase">AJOUT D'UN HÉBERGEMENT</h6>
                <h1 class="mb-5">Ajouter un <span class="text-primary text-uppercase">HÉBERGEMENT</span></h1>
            </div>
            <div class="row g-5">
                <div class="col-lg-12">
                    <div class="wow fadeInUp" data-wow-delay="0.2s">
                        {{ form_start(form, {'attr': {'novalidate': 'novalidate', 'class': 'needs-validation'}}) }}
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        {{ form_widget(form.nom, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.nom.vars.valid ? '' : ' is-invalid'),
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.nom.vars.id }}" class="form-label">Nom de l'hébergement</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.nom) }}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        {{ form_widget(form.type_hebergement, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.type_hebergement.vars.valid ? '' : ' is-invalid'),
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.type_hebergement.vars.id }}" class="form-label">Type d'hébergement</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.type_hebergement) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="form-floating mb-2">
                                        {{ form_widget(form.description, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.description.vars.valid ? '' : ' is-invalid'),
                                                'style': 'height: 100px',
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.description.vars.id }}" class="form-label">Description</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.description) }}
                                        </div>
                                    </div>
                                    <!-- Bouton IA -->
                                    <div class="text-end mb-3">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" onclick="ameliorerDescription()">
                                            ✨ Améliorer la description via l'IA
                                        </button>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        {{ form_widget(form.adresse, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.adresse.vars.valid ? '' : ' is-invalid'),
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.adresse.vars.id }}" class="form-label">Adresse</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.adresse) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-floating">
                                        {{ form_widget(form.ville, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.ville.vars.valid ? '' : ' is-invalid'),
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.ville.vars.id }}" class="form-label">Ville</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.ville) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-floating">
                                        {{ form_widget(form.pays, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.pays.vars.valid ? '' : ' is-invalid'),
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.pays.vars.id }}" class="form-label">Pays</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.pays) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        {{ form_widget(form.contact, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.contact.vars.valid ? '' : ' is-invalid'),
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.contact.vars.id }}" class="form-label">Contact</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.contact) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        {{ form_widget(form.nb_chambres, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.nb_chambres.vars.valid ? '' : ' is-invalid'),
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.nb_chambres.vars.id }}" class="form-label">Nombre de chambres</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.nb_chambres) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="form-floating">
                                        {{ form_widget(form.services, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.services.vars.valid ? '' : ' is-invalid'),
                                                'style': 'height: 100px',
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.services.vars.id }}" class="form-label">Services offerts</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.services) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="form-floating">
                                        {{ form_widget(form.politique_annulation, {
                                            'attr': {
                                                'class': 'form-control' ~ (form.politique_annulation.vars.valid ? '' : ' is-invalid'),
                                                'style': 'height: 100px',
                                                'placeholder': ' '
                                            }
                                        }) }}
                                        <label for="{{ form.politique_annulation.vars.id }}" class="form-label">Politique d'annulation</label>
                                        <div class="invalid-feedback">
                                            {{ form_errors(form.politique_annulation) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <button class="btn btn-primary w-100 py-3" type="submit">Créer l'hébergement</button>
                                </div>
                            </div>
                        {{ form_end(form) }}
                    </div>
                </div>
            </div>
            <!-- Lien de retour à la liste -->
            <div class="text-center mt-4">
                <a href="{{ path('app_hebergement_index') }}" class="btn btn-primary">Retour à la liste</a>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
<script>
    function ameliorerDescription() {
        const textarea = document.getElementById("{{ form.description.vars.id }}");
        const original = textarea.value;

        if (!original.trim()) {
            alert("Veuillez d'abord saisir une description.");
            return;
        }

        // Simulation d'une amélioration IA
        const improved = original + " (version enrichie automatiquement ✨)";
        textarea.value = improved;
    }
</script>
{% endblock %}
